<!-- web/templates/index.html -->
{% extends "base.html" %}
{% set title = "–ì–ª–∞–≤–Ω–∞—è" %}
{% set page_tag = "–ì–ª–∞–≤–Ω–∞—è" %}

{% block content %}

<div class="card">
  <h2><span id="greeting-icon">üëã</span> <span id="greeting-text">–ó–∞–≥—Ä—É–∑–∫–∞...</span></h2>
  <p>–õ–µ–æ ‚Äî –≤–∞—à –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤ –º–∏—Ä–µ Telegram. –£–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∑–∞–±–æ—Ç–∞ –æ –∫–æ–º—Ñ–æ—Ä—Ç–µ.</p>
  <button class="btn-primary" onclick="Toast.info('–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ø—Ä–µ–º–∏—É–º')">
    –û—Ñ–æ—Ä–º–∏—Ç—å –ø—Ä–µ–º–∏—É–º
  </button>
</div>

<!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
<div class="section-title">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
<div class="button-grid">
  <a href="#" class="action-btn">
    <div class="action-icon">üí∞</div>
    <div class="action-label">–§–∏–Ω–∞–Ω—Å—ã</div>
  </a>
  <a href="#" class="action-btn">
    <div class="action-icon">üå¶</div>
    <div class="action-label">–ü–æ–≥–æ–¥–∞</div>
  </a>
  <a href="#" class="action-btn">
    <div class="action-icon">üí¨</div>
    <div class="action-label">GigaChat</div>
  </a>
  <a href="#" class="action-btn">
    <div class="action-icon">üéÆ</div>
    <div class="action-label">–ò–≥—Ä—ã</div>
  </a>
</div>

<!-- –ü–û–ì–û–î–ê –ò –ö–£–†–°–´ -->
<div class="dual-stats">
  <!-- –ü–æ–≥–æ–¥–∞ -->
  <div class="stat-card">
    <div class="stat-title">
      <i>üå§</i> –ü–æ–≥–æ–¥–∞ –≤ –ú–æ—Å–∫–≤–µ
    </div>
    <div class="stat-row">
      <div class="stat-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞</div>
      <div class="stat-value">+14¬∞C</div>
    </div>
    <div class="stat-row">
      <div class="stat-label">–í–ª–∞–∂–Ω–æ—Å—Ç—å</div>
      <div class="stat-value">68%</div>
    </div>
    <div class="stat-row">
      <div class="stat-label">–í–µ—Ç–µ—Ä</div>
      <div class="stat-value">3 –º/—Å</div>
    </div>
  </div>

  <!-- –ö—É—Ä—Å—ã -->
  <div class="stat-card">
    <div class="stat-title">
      <i>üíµ</i> –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç
    </div>
    <div class="stat-row">
      <div class="stat-label">USD ‚Üí RUB</div>
      <div class="stat-value">98.50 ‚ÇΩ <span class="stat-change">+0.25</span></div>
    </div>
    <div class="stat-row">
      <div class="stat-label">EUR ‚Üí RUB</div>
      <div class="stat-value">109.80 ‚ÇΩ <span class="stat-change">+0.18</span></div>
    </div>
  </div>
</div>

<!-- –ù–æ–≤–æ—Å—Ç–∏ -->
<div class="section-title">üì∞ –ù–æ–≤–æ—Å—Ç–∏ –¥–Ω—è</div>
<div class="news-feed">
  <div class="news-item">
    <div class="news-icon">üåç</div>
    <div class="news-content">
      <div class="news-title">–ö—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞ –ø—Ä–µ–≤—ã—Å–∏–ª 99 —Ä—É–±–ª–µ–π</div>
      <div class="news-time">10 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥</div>
    </div>
  </div>
</div>
<button class="btn-sm" onclick="Toast.info('–û—Ç–∫—Ä—ã—Ç—å –ª–µ–Ω—Ç—É')">–û—Ç–∫—Ä—ã—Ç—å –ª–µ–Ω—Ç—É</button>

{% endblock %}

{% block scripts %}
<script>
  function updateGreeting() {
    const now = new Date();
    const hour = now.getHours();
    const greetingText = document.getElementById('greeting-text');
    const greetingIcon = document.getElementById('greeting-icon');

    if (hour >= 6 && hour < 12) {
      greetingText.textContent = '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!';
      greetingIcon.textContent = 'üå§';
    } else if (hour >= 12 && hour < 18) {
      greetingText.textContent = '–î–æ–±—Ä—ã–π –¥–µ–Ω—å!';
      greetingIcon.textContent = '‚òÄÔ∏è';
    } else if (hour >= 18 && hour < 23) {
      greetingText.textContent = '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä!';
      greetingIcon.textContent = 'üåÜ';
    } else {
      greetingText.textContent = '–ü—Ä–∏–≤–µ—Ç –Ω–æ—á–Ω—ã–º!';
      greetingIcon.textContent = 'üåô';
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    updateGreeting();

    const tg = window.Telegram?.WebApp;
    if (tg) {
      tg.ready();
      tg.expand();

      const user = tg.initDataUnsafe.user;
      if (user) {
        const avatar = document.querySelector('.user-avatar');
        if (user.photo_url) {
          avatar.src = user.photo_url;
        } else {
          avatar.src = `https://ui-avatars.com/api/?name=${user.first_name || 'User'}&background=4CAF50&color=fff`;
        }
      }
    }
  });
</script>
{% endblock %}