{% extends "base.html" %}

{% block title %}ĞšĞ°Ğ±Ğ¸Ğ½ĞµÑ‚{% endblock %}

{% block content %}
  <!-- Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ -->
  {% include 'partials/user-status.html' %}

  <!-- Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ -->
  <div class="section-title">âš¡ Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ</div>
  <div class="button-grid">
    <a href="/finance" class="action-btn">
      <div class="action-icon">ğŸ’°</div>
      <div class="action-label">Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑÑ‹</div>
    </a>
    <a href="/ai" class="action-btn">
      <div class="action-icon">ğŸ§ </div>
      <div class="action-label">AI-ĞŸĞ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº</div>
    </a>
    <a href="/settings" class="action-btn">
      <div class="action-icon">âš™ï¸</div>
      <div class="action-label">ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸</div>
    </a>
    <a href="/support" class="action-btn">
      <div class="action-icon">ğŸ“¬</div>
      <div class="action-label">ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°</div>
    </a>
  </div>

  <!-- Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚Ñ‹ -->
  <div class="section-title">ğŸ“Š Ğ’Ğ¸Ğ´Ğ¶ĞµÑ‚Ñ‹</div>
  <div class="widget-grid">
    <div class="card widget">
      <h3>Ğ”Ğ¾Ñ…Ğ¾Ğ´</h3>
      <p>{{ stats.income }} â‚½</p>
    </div>
    <div class="card widget">
      <h3>Ğ Ğ°ÑÑ…Ğ¾Ğ´</h3>
      <p>{{ stats.expense }} â‚½</p>
    </div>
    <div class="card widget">
      <h3>Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ</h3>
      <p>{{ stats.balance }} â‚½</p>
    </div>
    <div class="card widget">
      <h3>Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹</h3>
      <p>{{ user.referrals }}</p>
    </div>
  </div>

  <!-- ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸ -->
  <div class="section-title">ğŸ“° ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ</div>
  <div class="news-feed">
    {% for news in news_list %}
    <div class="card news-item">
      <div style="font-size: 14px; color: #757575; min-width: 80px;">{{ news.date }}</div>
      <div>{{ news.text|safe }}</div>
    </div>
    {% endfor %}
  </div>
{% endblock %}

{% block scripts %}
  <!-- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ toast Ğ¸ modal -->
  {% include 'partials/toast.html' %}
  {% include 'partials/modal.html' %}

  <script>
    // ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ¶Ğ°Ñ‚Ğ¸Ğ¸ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ
    function openAI() {
      Toast.info('Ğ—Ğ°Ğ¿ÑƒÑĞº AI-Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸ĞºĞ°...');
      // navigateTo('ai');
    }

    // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ñ
    document.addEventListener('DOMContentLoaded', () => {
      const hour = new Date().getHours();
      const greeting = document.getElementById('greeting') || document.createElement('div');
      const icons = { 5: "â˜€ï¸", 12: "ğŸŒ¤", 18: "ğŸŒ™", 22: "ğŸ˜´" };
      const g = ["ĞŸÑ€Ğ¸Ğ²ĞµÑ‚", "Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾", "Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ", "Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ²ĞµÑ‡ĞµÑ€", "Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğ¹ Ğ½Ğ¾Ñ‡Ğ¸"];
      const i = ["ğŸ™‚", "â˜€ï¸", "ğŸŒ¤", "ğŸŒ™", "ğŸ˜´"];
      const idx = hour < 5 ? 0 : Math.min(Math.floor((hour - 5) / 6), 4);
      greeting.textContent = g[idx];
    });
  </script>
{% endblock %}