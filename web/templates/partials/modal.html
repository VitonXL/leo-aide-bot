<!-- web/templates/partials/modal.html -->
<div id="modal" class="modal" style="display: none;">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modal-title">Подтвердите действие</h3>
      <span class="close" onclick="closeModal()">&times;</span>
    </div>
    <div class="modal-body">
      <p id="modal-text">Вы уверены, что хотите продолжить?</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" onclick="closeModal()">Отмена</button>
      <button class="btn btn-primary" onclick="confirmAction()">Подтвердить</button>
    </div>
  </div>
</div>

<style>
  .modal {
    display: flex;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    align-items: center;
    justify-content: center;
  }
  .modal-content {
    background-color: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: 0;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    border: 1px solid var(--border);
    overflow: hidden;
  }
  .modal-header {
    padding: 16px 20px;
    background: var(--accent);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .modal-body {
    padding: 20px;
    color: var(--text);
  }
  .modal-footer {
    padding: 16px 20px;
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    border-top: 1px solid var(--border);
  }
  .close {
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
  }
</style>

<script>
  let confirmCallback = null;

  function confirmAction(title = "Подтвердите", text = "Вы уверены?", callback = () => {}) {
    document.getElementById('modal-title').textContent = title;
    document.getElementById('modal-text').textContent = text;
    confirmCallback = callback;
    document.getElementById('modal').style.display = 'flex';
  }

  function closeModal() {
    document.getElementById('modal').style.display = 'none';
    confirmCallback = null;
  }

  window.onclick = function(event) {
    const modal = document.getElementById('modal');
    if (event.target === modal) {
      closeModal();
    }
  };

  document.addEventListener('keydown', function(event) {
    if (event.key === 'Escape') {
      closeModal();
    }
  });
</script>